@@ The Courthouse
@@ A low-DBREF object used for certain functions and @startup items.
@@ Requires the gold satchel object in "gold_satchel.txt".

@@ author = Matt Westfall
@@ email = disloops@gmail.com
@@ source = https://github.com/disloops/mushcode/blob/master/util_items/courthouse.txt

@@ Created and tested under PennMUSH v1.8.7

@create Courthouse
@set Courthouse=QUIET
@set Courthouse=MONITOR
@set Courthouse=!NO_COMMAND
@set Courthouse=WIZARD
@set Courthouse=SAFE
@lock/basic Courthouse==#1
@lock/enter Courthouse==#1

&DESCRIBE Courthouse=An administrative object to dispense startup settings.
&GET_GOLD_AMOUNT Courthouse=if(namegrab(lcon(%#),satchel of gold),get(namegrab(lcon(%#),satchel of gold)/amount),0)
&GET_GOLD Courthouse=switch(u(get_gold_amount),1,u(get_gold_amount) piece,u(get_gold_amount) pieces)
&CMD_GET_NAME Courthouse=name(%0)
&CMD_INVENTORY Courthouse=$inventory:@pemit %#=[ansi(h,You are carrying:)];@pemit %#=map(courthouse/cmd_get_name,lcon(%#), ,%r);@pemit %#=You have [u(get_gold)] of gold.

@@ In cases where there are a function and command that do the same thing (like pemit() and @pemit),
@@ the command's restrictions are also checked when the function is called, so to use pemit() you
@@ must also be able to use @pemit. However, a function's restrictions are not checked when a command
@@ is called, to allow disabling side-effect functions.

@@ Here is the list of commands that are not explicitly restricted to wizards, including custom ones:
@@ @cemit, @channel, @chat, @clist, @mail, @name, @list, @password, @version
@@ brief, buy, drop, empty, enter, examine, get, give, goto, help, home, inventory,
@@ leave, look, news, page, pose, say, search, sell, semipose, steal, teach, use, whisper, who

@@ NOTE: The commands below will not work if entered into the console manually with the semi-colon appended to the end!

@startup Courthouse=@hook/override/inline inventory=num(Courthouse),cmd_inventory;@hook/override/inline buy=num(Bank),cmd_buy;@command/add/noparse sell=num(Bank),cmd_sell;@hook/override/inline sell=num(Bank),cmd_sell;@function check_gold=num(Bank), check_gold;@function charge_gold=num(Bank), charge_gold;@function get_art=num(Library), get_art;@function get_parent_room=num(Library), get_parent_room;@function get_parent_drink=num(Library), get_parent_drink;@function get_parent_food=num(Library), get_parent_food;@function get_parent_item=num(Library), get_parent_item;@function get_parent_matches=num(Library), get_parent_matches;@function get_parent_soap=num(Library), get_parent_soap;@function get_parent_satchel=num(Library), get_parent_satchel;@function get_parent_fishing_rod=num(Library), get_parent_fishing_rod;@function get_parent_fishing_lure=num(Library), get_parent_fishing_lure;@function get_parent_body_of_water=num(Library), get_parent_body_of_water;@function get_parent_laverian_sea=num(Library), get_parent_laverian_sea;@function get_parent_fish=num(Library), get_parent_fish;@function get_parent_coin=num(Library), get_parent_coin;@function get_room_hostel=num(Library), get_room_hostel;@function/restrict check_gold=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict charge_gold=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_art=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_room=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_drink=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_food=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_item=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_matches=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_soap=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_satchel=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_fishing_rod=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_fishing_lure=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_body_of_water=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_laverian_sea=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_parent_fish=FLAG^WIZARD|!TYPE^PLAYER;@function/restrict get_room_hostel=FLAG^WIZARD|!TYPE^PLAYER;@command/restrict @assert=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @atrchown=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @atrlock=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @attribute=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @boot=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @break=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @chown=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @chownall=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @chzone=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @chzoneall=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @clock=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @clone=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @command=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @config=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @cpattr=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @create=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @dbck=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @decompile=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @destroy=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @dig=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @disable=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @dolist=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @drain=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @dump=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @edit=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @elock=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @emit=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @enable=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @entrances=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @eunlock=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @find=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @firstexit=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @flag=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @force=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @function=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @gedit=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @grep=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @halt=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @hide=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @http=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @ifelse=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @include=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @kick=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @link=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @listmotd=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @lock=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @log=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @lset=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @malias=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @map=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @mapsql=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @message=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @moniker=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @motd=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @mvattr=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @name=!POWER^GUEST&!FLAG^GAGGED;@command/restrict @newpassword=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @notify=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @nscemit=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @nsemit=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @nslemit=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @nsoemit=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @nspemit=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @nsprompt=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @nsremit=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @nszemit=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @nuke=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @oemit=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @open=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @parent=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @pcreate=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @pemit=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @poll=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @power=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @prompt=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @ps=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @purge=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @quota=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @readcache=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @recycle=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @rejectmotd=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @remit=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @respond=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @restart=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @retry=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @rwall=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @scan=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @search=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @select=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @set=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @shutdown=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @sitelock=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @skip=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @slave=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @sockset=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @sql=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|POWER^SQL_OK;@command/restrict @squota=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @stats=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @suggest=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @sweep=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @switch=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @teleport=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @trigger=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @ulock=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @undestroy=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @unfollow=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @unlink=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @unlock=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @unrecycle=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @uptime=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @uunlock=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @verb=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @wait=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict @wall=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @warnings=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @wcheck=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @whereis=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @wipe=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @wizmotd=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @wizwall=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict @zemit=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict addcom=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict ahelp=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict anews=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict attrib_set=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict comlist=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict comtitle=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict delcom=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict desert=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict dismiss=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict follow=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict score=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict session=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict think=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict unfollow=FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED;@command/restrict unimplemented_command=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict warn_on_missing=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER;@command/restrict WITH=(FLAG^WIZARD&!POWER^GUEST&!FLAG^GAGGED)|!TYPE^PLAYER